<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Phoebbi's Dreamscape</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;700&family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        /* --- Ghibli Atmosphere --- */
        body { font-family: 'Comfortaa', sans-serif; overflow: hidden; background: #d4eaf7; color: #4a5568; }
        .handwritten { font-family: 'Patrick Hand', cursive; }

        /* The Moving Sky Background Layers */
        .ghibli-bg { position: absolute; inset: 0; width: 100%; height: 100%; z-index: -10; overflow: hidden; background: linear-gradient(to bottom, #a1c4fd, #c2e9fb, #f6fba2); }
        .cloud { position: absolute; opacity: 0.8; filter: blur(8px); animation: float-cloud linear infinite; }
        .cloud-1 { top: 10%; left: -20%; width: 300px; height: 100px; background: #fff; border-radius: 100px; animation-duration: 25s; opacity: 0.6; }
        .cloud-2 { top: 30%; left: -30%; width: 400px; height: 120px; background: #fff; border-radius: 100px; animation-duration: 35s; animation-delay: -5s; opacity: 0.5; }
        .cloud-3 { top: 60%; left: -10%; width: 250px; height: 80px; background: #fff; border-radius: 100px; animation-duration: 20s; animation-delay: -10s; opacity: 0.7; }
        @keyframes float-cloud { from { transform: translateX(0); } to { transform: translateX(150vw); } }

        /* Floating Dust Motes */
        .mote { position: absolute; background: rgba(255, 255, 230, 0.8); border-radius: 50%; box-shadow: 0 0 10px rgba(255, 255, 200, 0.5); animation: mote-float linear infinite alternate; }
        @keyframes mote-float { 0% { transform: translateY(0) translateX(0); opacity: 0; } 50% { opacity: 1; } 100% { transform: translateY(-100px) translateX(50px); opacity: 0; } }

        /* --- UI Elements --- */
        .glass-panel { background: rgba(255, 255, 255, 0.4); backdrop-filter: blur(8px); border: 2px solid rgba(255, 255, 255, 0.8); box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15); }
        
        /* Photo Frame Bloom */
        .photo-bloom { animation: gentle-bloom 4s ease-in-out infinite alternate; }
        @keyframes gentle-bloom { 0% { box-shadow: 0 0 20px rgba(255, 183, 197, 0.3); } 100% { box-shadow: 0 0 40px rgba(255, 183, 197, 0.6); } }

        /* Whispering Text Animation */
        .whisper-text span { opacity: 0; filter: blur(4px); animation: whisper 1s forwards; }
        @keyframes whisper { to { opacity: 1; filter: blur(0); } }

        /* Magic Button Fill */
        .magic-fill { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, #f6adba, #fbc2eb); transition: height 0.1s linear; z-index: 0; opacity: 0.8; }
    </style>
</head>
<body class="flex flex-col items-center justify-between min-h-screen py-6 px-5 relative">

    <div class="ghibli-bg">
        <div class="cloud cloud-1"></div>
        <div class="cloud cloud-2"></div>
        <div class="cloud cloud-3"></div>
    </div>
    <div id="motes-container" class="fixed inset-0 pointer-events-none -z-5"></div>

    <div class="w-full flex justify-between items-center mb-2 relative z-10">
        <div class="glass-panel px-4 py-2 rounded-full">
            <p class="text-sm font-bold text-rose-500 tracking-widest">Jan 03</p>
        </div>
        
        <div onclick="toggleMusic()" class="w-12 h-12 glass-panel rounded-full flex items-center justify-center shadow-sm active:scale-90 transition cursor-pointer">
            <span id="music-icon" class="text-xl filter hue-rotate-15">ðŸŽ»</span>
        </div>
    </div>

    <div class="relative w-full max-w-[320px] my-auto z-10">
        <div class="absolute -top-6 -left-6 text-4xl opacity-60 animate-bounce" style="animation-duration: 3s">ðŸŒ¸</div>
        <div class="absolute -bottom-4 -right-4 text-3xl opacity-60 animate-pulse" style="animation-duration: 4s">âœ¨</div>
        
        <div class="glass-panel p-3 rounded-[30px] photo-bloom transform rotate-2 hover:rotate-0 transition-all duration-700">
            <div class="w-full aspect-[4/5] rounded-[20px] overflow-hidden relative">
                <img src="phoebbi.jpeg" alt="Phoebbi" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-rose-900/30 to-transparent mix-blend-overlay"></div>
            </div>
            <div class="text-center pt-4 pb-2">
                <p class="handwritten text-2xl text-rose-600 font-bold">My Beautiful Phoebbi Kate</p>
                <p class="text-xs text-gray-500 mt-1">11 Months in our own little world.</p>
            </div>
        </div>
    </div>

    <div class="w-full text-center z-10 mt-4">
        <h1 id="whisper-target" class="text-lg text-gray-700 font-bold mb-6 h-8 flex justify-center items-center whisper-text">
            </h1>

        <p class="text-xs uppercase tracking-[0.2em] text-rose-400 font-bold mb-3">Time until our 1st Year</p>
        <div class="flex justify-center gap-3">
            <div class="glass-panel rounded-2xl p-3 w-16 flex flex-col items-center">
                <span id="d" class="text-xl font-bold text-rose-500">00</span><span class="text-[8px] uppercase">Days</span>
            </div>
            <div class="glass-panel rounded-2xl p-3 w-16 flex flex-col items-center">
                <span id="h" class="text-xl font-bold text-rose-500">00</span><span class="text-[8px] uppercase">Hrs</span>
            </div>
            <div class="glass-panel rounded-2xl p-3 w-16 flex flex-col items-center">
                <span id="m" class="text-xl font-bold text-rose-500">00</span><span class="text-[8px] uppercase">Mins</span>
            </div>
            <div class="glass-panel rounded-2xl p-3 w-16 flex flex-col items-center">
                <span id="s" class="text-xl font-bold text-rose-500">00</span><span class="text-[8px] uppercase">Secs</span>
            </div>
        </div>
    </div>

    <div class="w-full flex flex-col items-center z-10 mt-8 mb-4">
        <button id="magic-btn" class="relative w-full max-w-[320px] h-16 rounded-full border-2 border-white overflow-hidden glass-panel shadow-lg active:scale-95 transition-transform">
            <div id="magic-fill" class="magic-fill h-0"></div>
            <span class="relative z-10 flex items-center justify-center gap-2 text-rose-600 font-bold tracking-wider h-full">
                HOLD FOR MAGIC âœ¨
            </span>
        </button>
        <p class="text-[10px] text-gray-500 mt-2">Keep holding to release the sakura...</p>
    </div>

    <audio id="bg-music" loop>
        <source src="song.mp3" type="audio/mpeg"> 
    </audio>

    <script>
        // --- 1. Generate Dust Motes ---
        const motesContainer = document.getElementById('motes-container');
        for (let i = 0; i < 20; i++) {
            const mote = document.createElement('div');
            mote.classList.add('mote');
            const size = Math.random() * 4 + 2 + 'px';
            mote.style.width = size;
            mote.style.height = size;
            mote.style.left = Math.random() * 100 + 'vw';
            mote.style.top = Math.random() * 100 + 'vh';
            mote.style.animationDuration = Math.random() * 5 + 5 + 's';
            mote.style.animationDelay = Math.random() * 5 + 's';
            motesContainer.appendChild(mote);
        }

        // --- 2. Whispering Text Animation ---
        const textToWhisper = "Happy 11th Monthsary, my love.";
        const target = document.getElementById('whisper-target');
        textToWhisper.split(' ').forEach((word, wordIndex) => {
            const wordSpan = document.createElement('span');
            wordSpan.className = 'inline-block whitespace-nowrap';
            word.split('').forEach((char, charIndex) => {
                const charSpan = document.createElement('span');
                charSpan.textContent = char;
                // Stagger animation delays
                charSpan.style.animationDelay = `${(wordIndex * 0.2) + (charIndex * 0.05) + 0.5}s`;
                wordSpan.appendChild(charSpan);
            });
            target.appendChild(wordSpan);
            // Add space between words
            if (wordIndex < textToWhisper.split(' ').length - 1) {
                const space = document.createElement('span');
                space.innerHTML = '&nbsp;';
                target.appendChild(space);
            }
        });


        // --- 3. Countdown Logic (Feb 3, 2026) ---
        const targetDate = new Date("Feb 3, 2026 00:00:00").getTime();
        setInterval(() => {
            const now = new Date().getTime();
            const diff = targetDate - now;
            document.getElementById('d').innerText = String(Math.floor(diff / (1000 * 60 * 60 * 24))).padStart(2, '0');
            document.getElementById('h').innerText = String(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
            document.getElementById('m').innerText = String(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
            document.getElementById('s').innerText = String(Math.floor((diff % (1000 * 60)) / 1000)).padStart(2, '0');
        }, 1000);

        // --- 4. Magic Long Press & Sakura Storm ---
        const btn = document.getElementById('magic-btn');
        const fill = document.getElementById('magic-fill');
        let pressTimer, pressDuration = 0;

        const startPress = (e) => {
            e.preventDefault();
            if (pressDuration > 0) return; // Prevent double trigger
            pressTimer = setInterval(() => {
                pressDuration += 2.5;
                fill.style.height = pressDuration + '%';
                if (pressDuration >= 100) {
                    clearInterval(pressTimer);
                    triggerSakuraStorm();
                    fill.style.height = '0%'; pressDuration = 0;
                }
            }, 30);
        };
        const endPress = () => {
            clearInterval(pressTimer);
            if (pressDuration < 100) { fill.style.height = '0%'; pressDuration = 0; }
        };

        btn.addEventListener('touchstart', startPress);
        btn.addEventListener('touchend', endPress);
        btn.addEventListener('mousedown', startPress); // For desktop testing
        btn.addEventListener('mouseup', endPress);

        // Sakura Confetti Configuration
        function triggerSakuraStorm() {
            // A mix of pinks and whites, using circle and oval shapes to mimic petals
            const sakuraColors = ['#ffb7c5', '#ffc3a0', '#ffffff', '#fce7f3'];
            
            const defaults = { startVelocity: 30, spread: 360, ticks: 150, zIndex: 999, shapes: ['circle'], colors: sakuraColors };
            
            confetti({ ...defaults, particleCount: 100, origin: { y: 0.7 }, scalar: 1.2 });
            confetti({ ...defaults, particleCount: 50, origin: { y: 0.7 }, scalar: 0.8, shapes: ['square'] }); // Adds some variety in petal shape
            
            // Optional: Play a gentle chime sound here if you have one
        }

        // --- 5. Music Toggle ---
        function toggleMusic() {
            const music = document.getElementById('bg-music');
            const icon = document.getElementById('music-icon');
            if(music.paused) { music.play(); icon.style.opacity = 1; }
            else { music.pause(); icon.style.opacity = 0.6; }
        }
    </script>
</body>
</html>

